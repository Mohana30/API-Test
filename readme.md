Java Serenity Any API project

This is a simplest possible setup for Java Serenity with BDD.

This is a very minimal sample API test automation project using Serenity BDD in Java. Anyone can this project as quick starting point for your own projects.



Get the code
Git:


Write New Test

	The project directory structure
		
		src
		+ test
			+ java
				+ com
					+anyapiassignment
						+cucumber 				Test runners and supporting code
							+serenity			Serenity steps
							+stepdefinition		Actual step definitions
						+testbase					
						+utils
							
			+ resources
				+ features                  
					+ googlebooks.feature   	Feature files   


	Sample feature	
		
		Using cucumber/gherkin language,
			
			Scenario: Validate the google books endpoint with invalid bookshelf id
			When User request google books shelf lists
			Then Validate the invalid book shelf 101 and "The bookshelf ID could not be found." error message
			
	Implementation
	
		Step definitions makes the script more flexible and compatible, Eg:
		
				@When("User request google books shelf lists")
				public void user_request_google_books_shelf_lists() {
					steps.getBookShelfList().statusCode(200).spec(ReuseableSpecifications.getGenericResponseSpec()).log().all();	    		
				}

				@Then("User request the {int} volumes and validate {string}")
				public void user_request_the_volumes_and_validate(Integer bookshelf_id, String volume_title) {
					steps.getBookShelfVolumes(bookshelf_id).statusCode(200).body("items.volumeInfo.title", hasItem(volume_title));
				}
				
				@Then("Validate the invalid book shelf {int} and {string} error message")
				public void validate_the_invalid_book_shelf_and_error_message(Integer bookshelf_id, String error_res_message) {
					steps.getBookShelfVolumes(bookshelf_id).statusCode(404).body("error.message",equalTo(error_res_message));
				}
				
		Navigate to Serenity steps for the lean method
			
				@Step("Get all bookshelf list")
				public ValidatableResponse getBookShelfList() {
					return SerenityRest.given().when().get("users/101349823125559959898/bookshelves").then();
				}
				
				@Step("Get particular bookshelf volumes")
				public ValidatableResponse getBookShelfVolumes(Integer bookshelf_id) {
					return SerenityRest.given().when().get("users/101349823125559959898/bookshelves/"+bookshelf_id+"/volumes").then();
				}
				
		Test Base is standard, reusable class and just the URL of the page itself
		
				@BeforeClass
				public static void init() {
					RestAssured.baseURI="https://www.googleapis.com/books/v1/";
				}


To execute the Build provide the below Maven Goal

	clean verify serenity:aggregate

To execute Tagged tests, provide the goal as shown in the below format
	
	clean verify -Dcucumber.options="--tags @smoke" serenity:aggregate


View Report

	Maven Goals will product aggregate serenity test report "in target/site/serenity" directory
	
	Serenity report consist of all the test details. Full serenity report generated by serenity-maven-plugin we can trigger sing command line
	
	Serenity has serenity-single-page-report, self contained HTML summary report contain test overview, status of different areas of application
	
	
			<plugin>
				<groupId>net.serenity-bdd.maven.plugins</groupId>
				<artifactId>serenity-maven-plugin</artifactId>
				<version>${serenity.version}</version>
				<dependencies>
					<dependency>
						<groupId>net.serenity-bdd</groupId>
						<artifactId>serenity-single-page-report</artifactId>
						<version>${serenity.version}</version>
					</dependency>
					<dependency>
						<groupId>net.serenity-bdd</groupId>
						<artifactId>serenity-navigator-report</artifactId>
						<version>2.3.13</version>
					</dependency>
				</dependencies>
				<configuration>
					<tags>${tags}</tags>
					<reports>single-page-html,navigator</reports>
				</configuration>
				<executions>
					<execution>
						<id>serenity-reports</id>
						<phase>post-integration-test</phase>
						<goals>
							<goal>aggregate</goal>
						</goals>
					</execution>
				</executions>
			</plugin>
